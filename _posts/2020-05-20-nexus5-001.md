---
title: "LG NEXUS5에 커스트롬(Android 10.0) 설치"
author: APPAGA
date: 2020-05-22 22:00:00 +0900
categories: [Android, NEXUS5]
tags: [lineageos]
---

예전에 쓰던 LG Nexus5에 Android 9.0 Pie 기반의 LineageOS 16 롬을 설치하고자 한다.
Android 6.0.1까지 업데이트가 된 상태에서 진행하였다.

Nexus5의 리커버리 진입 키는 `볼륨다운+전원` 키입니다.
전원키로 다시 시작 선택하여 재부팅 시작하자 마자 계속 누르고 있으면 바이오스 화면으로 들어갈 수 있습니다.

## **LineageOS17** 설치 (설치성공-사용 안함)
LineageOS 16 버전 자체 설치는 문제가 없었으나 
gapps 설치시에 시스템 파티션 용량 부족하다는 문제로 설치를 못 해서 OS가 정상 부팅되도 
구글 스토어에서 앱을 설치할 수가 없었습니다. 
구글 기본앱이 설치가 되지 않아서 앱 설치는 아무것도 할 수 없었습니다.
파티션을 수정해서 시스템 파티션 용량을 늘리면 된다는 글을 봤지만 따라 하기에는 너무 귀찮아서 포기합니다.

좀 더 구글링 하던 와중에 Android 10 버전을 설치하는 가이드 사이트를 발견해서 진행해봤습니다.
이미 설치된 TWRP에서 wipe으로 모두 삭제한 후에 OS랑 gapps를 Android 10 버전용으로 설치합니다.

[LineageOS17 설치 가이드][os17_install] 사이트에서 OS 파일과 gapps pico(Android 10 버전용)을 다운받아서 설치하면 됩니다.

이것도 gapps pico 버전 설치시에 용량 부족으로 설치가 실패됩니다.
OS 부팅은 잘 되나 구글 스토어를 사용하지 못 하니 별 쓸모가 없었습니다.

## "hammerhead" for Nexus 5 (GSM/LTE) (공장초기화-OS원복-설치성공-현재 매우 잘 사용 중)
LineastOS17 설치는 되지만 또 gapps 설치가 안되서 구글스토어를 못 쓰는 상황이 되어 포기합니다.
GIS(Generic Systems Images)로 Nexus5용 마지막 버전인 OS 6.0.1로 설치합니다.

[GIS 구글 사이트][gis_ota]에서 Nexus5용 **hammerhead** 이미지를 다운로드 받아서 설치합니다.
OTA 버전을 권장하길래 사용하였습니다.

TWRP에서 Wipe으로 청소를 깨끗히 해주고 설치를 진행합니다.
설치 후에 재부팅하니 익숙한 구글 부팅 화면이 표시됩니다.

재부팅시에 부팅화면이 10분 정도 표시되니 불안해 하지 마시고 잠깐 쉬고 오면 **Welcome** 화면이 표시됩니다.

세팅을 진행하는데 LineageOS에서는 볼 수 없었던 구글계정 설정화면이 나타나고 진행이 잘 됩니다.

안드로이드 9나 10을 설치해서 쓰고 싶으나 구글스토어를 설치하지 못 하면 만족되지 않아서 6 버전으로 되돌린 것이 아쉽기는 합니다.
시스템 파티션을 늘리는 방법을 귀찮더라도 해보고 싶습니다.

## TWRP 설치
Android SDK의 adb와 fastboot를 PC에 설치하고 usb debug 모드로 Nexus5를 pc에 연결하여 작업을 진행한다.

[TWRP 이미지 다운로드][twrp_down] 사이트에서 최신 twrp 이미지를 다운로드 한다.
파일탐색기에서 다운로드한 폴더로 이동한 후에 `shift+우클릭`하면  `여기에 PowerShell 창 열기` 메뉴로 파워쉘을 쉽게 열 수 있다.

아래 명령으로 `fastboot` 모드로 재부팅한다.
```shell
adb reboot bootlader
```

`fastboot` 모드에서 항목 이동은 볼륨 다운/업키로 하고, 항목 선택은 전원키로 할 수 있다.

재부팅되면 **fastboot mode** 화면을 확인할 수 있다.
![fastboot mode 부팅 화면](\assets\img\android\nexus5-003.jpg)

화면 가장 아래에 `LOCK STATE - lockecd`로 표시가 되고 있다면 `oem unlock` 명령으로 락을 푼다. 
명령을 실행하면 아래 그림과 같이 물어보는데 볼륨업키로 `Yes`를 선택 후에 전원키를 누르면 언록을 실행한다.
![fastboot 명령 실행화면](\assets\img\android\nexus5-004.jpg)

언록이 완료되면 아래 그림과 같이 언록상태를 확인할 수 있다.
![fastboot 명령 실행화면](\assets\img\android\nexus5-005.jpg)

락을 푼 후에 `flash recovery` 명령으로 다운받은 TWRP 이미지를 설치한다. 설치 후에 `format userdata` 명령으로 청소를 해준다.
```shell
fastboot oem unlock
fastboot flash recovery twrp-3.3.1-0-hammerhead.img
fastboot format userdata
```

![fastboot 명령 실행화면](\assets\img\android\nexus5-001.png)

설치가 완료되면 **볼륨 업/다운** 키로 상단에 표시되는 버튼명이 `Recovery mode`가 되도록 하여 **전원키**로 선택하면 **TWRP** 화면으로 진입할 수 있다.
![Recovery mode 화면](\assets\img\android\nexus5-006.jpg)
![TWRP 화면](\assets\img\android\nexus5-007.jpg)

## LineaseOS 16 설치하기
TWRP `Wipe` 화면에 진입하여 `Advanced Wipe`을 선택하고 **Dlavik / ART Cache, system, data, Internal Storage, cache** 항목을 모두 선택하여 **Wipe**을 진행한다.

**TWRP** 화면으로 진입된 상태라면 pc에서 `adb` 명령으로 파일을 복사할 수 있다.

[Lineageos 16 다운로드 사이트][os_down]에서 최신 lineageos 16 파일을 다운한다. 
이 글을 작성시에 `lineage-16.0-20190926-UNOFFICIAL-hammerhead` 버전을 받을 수 있었다.
[GAPPS 사이트][gapps]에서 **ARM 플랫폼**에 해당하는 파일을 받는다. Nexus5는 32bit만 지원한다.
**ARM platform, Android 9.0, Variant pico** 옵선을 선택하여 파일을 받았다.

다운로드한 파일들을 `adb push` 명령으로 Nexus5로 복사한다.
```shell
adb push lineage-16.0-20190926-UNOFFICIAL-hammerhead.zip /sdcard/os.zip
adb push open_gapps-arm-9.0-pico-20200520.zip /sdcard/gapps.zip
```

powersehll 실행 화면
![powersehll 실행 화면](\assets\img\android\nexus5-002.png)

TWRP 화면에서  **Install** 화면으로 진입하여 앞에서 복사한 `os.zip`을 선택하여 설치한다.
설치가 완료되면 **Wipe Cache/Dalvik** 버튼을 선택하여 청소를 한번 해준다.
`gapps.zip`도 같은 방법으로 설치한다.

LineagesOS 설치는 [참고 사이트][os_ref]를 참고하여 진행하고 정리한 것이다.
TWRP 설치는 [참고 사이트][twrp_ref]를 참고하여 진행하고 정리한 것이다. 

## LineageOS 17 설치


[os_ref]: http://theupgradeguide.com/2019/06/30/install-android-9-0-pie-on-google-nexus-5-lineageos-16-how-to-guide/
[twrp_ref]: https://clickitornot.com/install-twrp-recovery-and-root-nexus-5/
[twrp_down]: https://dl.twrp.me/hammerhead/
[os_down]: https://forum.xda-developers.com/google-nexus-5/orig-development/rom-lineageos-16-0-nexus-5-t3921162
[gapps]: https://opengapps.org/
[os17_install]: https://forum.xda-developers.com/google-nexus-5/orig-development/rom-lineageos-17-1-nexus-5-hammerhead-t4039273
[gis_ota]: https://developers.google.com/android/ota

